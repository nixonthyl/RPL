<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarik Dana ke Rekening</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #e9f5e9 0%, #d4e8d4 100%);
            min-height: 100vh;
            padding-top: 20px;
        }
        .container { max-width: 500px; margin: 0 auto; padding: 0 20px; }
        .header {
            background: white; border-radius: 15px; padding: 15px 20px;
            display: flex; align-items: center; gap: 15px; margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .back-btn {
            background: #ddd; border: none; width: 40px; height: 40px;
            border-radius: 50%; cursor: pointer; font-size: 20px;
            display: flex; align-items: center; justify-content: center;
        }
        .header h1 { font-size: 20px; font-weight: bold; color: #1a1a1a; flex: 1; text-align: center; }

        .section {
            background: white; border-radius: 12px; margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); padding: 20px;
        }
        .section h2 { font-size: 18px; color: #1a1a1a; margin-bottom: 15px; }

        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; font-size: 14px; color: #666; margin-bottom: 8px; }
        .form-input {
            width: 100%; padding: 12px; border: 1px solid #ddd;
            border-radius: 8px; font-size: 15px;
            appearance: none; 
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
            background-size: 12px auto;
        }
        .form-input:focus { outline: none; border-color: #2d8659; }

        .points-info {
            background: #f0fef8; padding: 15px; border-radius: 8px;
            margin-bottom: 20px; border: 1px solid #2d8659;
        }
        .points-info p { font-size: 13px; color: #666; margin-bottom: 5px; }
        .points-info strong { color: #2d8659; font-size: 16px; }

        .note { font-size: 12px; color: #e34c4c; line-height: 1.4; }

        .submit-btn {
            width: 100%; padding: 15px; background: #2d8659;
            color: white; border: none; border-radius: 10px;
            font-size: 16px; font-weight: bold; cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-btn" onclick="window.location.href='redeem.html'">‚Üê</button>
            <h1>Tarik Dana</h1>
        </div>

        <div class="section">
            <h2>Tarik Dana ke Rekening Bank</h2>
            
            <div class="points-info">
                <p>Saldo Poin Anda: <strong>500.000 Points</strong></p>
                <p>Nilai Tukar: <strong>1 Point = Rp 1</strong></p>
            </div>

            <div class="input-group">
                <label for="bankName">Nama Bank</label>
                <select id="bankName" class="form-input" required>
                    <option value="" disabled selected>Pilih Bank Tujuan</option>
                    <option value="BCA">Bank Central Asia (BCA)</option>
                    <option value="Mandiri">Bank Mandiri</option>
                    <option value="BRI">Bank Rakyat Indonesia (BRI)</option>
                    <option value="BNI">Bank Negara Indonesia (BNI)</option>
                    <option value="BSI">Bank Syariah Indonesia (BSI)</option>
                    <option value="CIMB">CIMB Niaga</option>
                    <option value="Permata">Bank Permata</option>
                </select>
            </div>

            <div class="input-group">
                <label for="accountNumber">Nomor Rekening</label>
                <input type="number" id="accountNumber" class="form-input" placeholder="Contoh: 1234567890" required>
            </div>

            <div class="input-group">
                <label for="redeemPoints">Jumlah Poin yang Ditukar (Minimal 1 Poin)</label>
                <input type="number" id="redeemPoints" class="form-input" placeholder="Masukkan jumlah poin" required>
            </div>
            
            <div class="points-info" style="margin-top: -10px; margin-bottom: 25px;">
                <p>Dana yang akan diterima: <strong id="cashAmount">Rp 0</strong></p>
            </div>

            <p class="note">
                *Penarikan dana diproses dalam waktu 1x24 jam kerja. Pastikan data rekening Anda sudah benar.
            </p>
            
            <button class="submit-btn" onclick="processRedeem()">TARIK DANA SEKARANG</button>
        </div>
    </div>

    <script>
        // Fungsi untuk memformat angka dengan pemisah ribuan (titik)
        function formatNumber(num) {
            if (num === undefined || num === null || isNaN(num)) return '0';
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        document.getElementById('redeemPoints').addEventListener('input', function() {
            const points = parseInt(this.value);
            
            // Nilai Tukar: 1 Point = Rp 1
            const cash = points;
            
            const cashDisplay = isNaN(cash) ? 'Rp 0' : 'Rp ' + formatNumber(cash);
            document.getElementById('cashAmount').textContent = cashDisplay;
        });
        
        // Atur nilai default saat halaman dimuat
        document.addEventListener('DOMContentLoaded', () => {
             // Set default value ke 1 di awal
             document.getElementById('redeemPoints').value = 1;
             document.getElementById('cashAmount').textContent = 'Rp 1';
        });


        function processRedeem() {
            const bankName = document.getElementById('bankName').value;
            const accountNumber = document.getElementById('accountNumber').value.trim();
            const pointsInput = document.getElementById('redeemPoints');
            const points = parseInt(pointsInput.value);

            if (!bankName) {
                alert('Silakan pilih Bank Tujuan.');
                return;
            }
            if (!accountNumber) {
                alert('Silakan masukkan Nomor Rekening.');
                return;
            }
            if (isNaN(points) || points < 1) {
                alert('Minimal penukaran adalah 1 Point.');
                pointsInput.focus();
                return;
            }
            
            const cash = points;

            alert(`Permintaan penarikan ${formatNumber(points)} Points (Rp ${formatNumber(cash)}) ke Bank ${bankName} berhasil diajukan!`);
            
            // Redirect setelah sukses ke dashboard.html, bukan riwayat-transaksi.html
            window.location.href = 'dashboard.html';
        }
    </script>
</body>
</html>